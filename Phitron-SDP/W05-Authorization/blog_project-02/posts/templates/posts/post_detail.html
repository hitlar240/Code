{% extends "base.html" %}
{% load crispy_forms_tags %}


{% block content %}

<div class="card w-50 m-auto mt-3 mb-5">
    <div class="card-header bg-success ">
        <h5 class="card-title text-white">{{posts.title}}</h5>
    </div>
    <div class="card-body">
        <img class='w-100 rounded' src={{posts.image.url}} alt="photo">
        <p class="card-text mt-3">{{posts.content}}</p>
        <h6><span class='text-success'>Author: </span>{{posts.author.first_name}} {{posts.author.last_name}}</h6>
        <div class="d-flex flex-wrap gap-2 align-items-center">
            <h6 class='text-success'>Categories: </h6>
            {% for cat in posts.category.all %}
                <a class='btn btn-sm btn-warning' href={% url "category_slug" cat.slug %}>{{cat.name}}</a>
            {% endfor %}
        </div>

        <h3 class='mt-5'>All {{comments|length}} Comments:</h3>
        {% for comment in comments %}
        <div class="card mt-3 border border-success-subtle">
            <div class="card-body">
                <div class="d-flex justify-content-between align_items-center">
                    <h5>{{comment.name}}</h5>
                    <h6 class='text-secondary'>{{comment.created_time}}</h6>
                </div>
                <p>{{comment.body}}</p>
            </div>
        </div>
        {% endfor %}

        <h3 class='mt-5'>Add Your Comment:</h3>
        <div class="card mt-3 border border-success-subtle">
            <div class="card-body ">
                <form action="" method='post'>
                    {% csrf_token %}
                    {{comment_form | crispy}}
                    {% comment %} <input class='btn btn-success' type="submit" value="Comment"> {% endcomment %}
                    <button class='btn btn-success'>Comment</button>
                </form>
            </div>
        </div>
    </div>
</div>

{% endblock content %}